# 1.1 Описание итоговой аттестации 
**Цель задания и описание**
Пользователь может поймать монстров в дополненной реальности на физической карте рядом с собой.

[Прототип в Figma.](https://www.figma.com/proto/sJOYVgkgYGglM0kwlSUXoR/%D0%94%D0%B8%D0%B7%D0%B0%D0%B9%D0%BD-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9-%D0%B4%D0%BB%D1%8F-%D0%B4%D0%B8%D0%BF%D0%BB%D0%BE%D0%BC%D0%BD%D1%8B%D1%85-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%BE%D0%B2?node-id=23%3A857&viewport=1549%2C462%2C0.4553612470626831&scaling=min-zoom)

В приложении используется геолокация и камера. При запуске приложения происходит проверка на наличие доступа к геолокации пользователя:

если доступа нет, но приложение может запросить его, то показывается экран №1.
если доступа нет и приложение не может запросить его, то показывается экран №2.
если доступ есть, показывается экран №3.

## Термины


- **Кэширование** – сохранение данных в постоянную память телефона.
Тип заполнения изображения – задает правило, по которому картинка будет отрисовываться в элементе «Изображение» при условии, что они имеют разные соотношения сторон. Возможны три варианта:
- **Resize** – картинка заполняет всю область, при этом деформируясь;
- **Fit** – картинка сохраняет пропорцию и целиком отрисовывается в области изображения; при этом по краям (слева и справа или снизу и сверху) могут быть пустые области;
- **Fill** – картинка заполняет всю область, сохраняя свою пропорцию, при этом часть изображения (слева и справа или снизу и сверху) может быть обрезана.


## Общие технические требования
Требования к устройствам
Приложение должно работать на следующих устройствах:
iPhone смартфоны: от версии 11.0 и до последней версии iOS, выпущенной на момент отправки работы.
Требования к ориентации приложения
Приложение должно работать только в портретном режиме. 
Требование к надежности
Приложение не должно аварийно завершаться ни при каких условиях.
Требование к коду
Приложение должно быть разработано на языке программирования Swift.
Состояние экранов и интерактивные элементы
Для каждого экрана в отдельном пункте описываются все его состояния и интерактивные элементы. Интерактивным элементом экрана является любой элемент интерфейса, который может изменять свой внешний вид и/или содержимое и/или реагировать на действия пользователя. Помимо индивидуальных характеристик, каждый интерактивный элемент обладает двумя общими характеристиками:
виден/не виден: говорит о том, виден ли данный элемент пользователю. Если не указано другое, элемент всегда виден пользователю;
активен/не активен: говорит о том, может ли пользователь взаимодействовать с данным элементом. Если не указано другое, элемент всегда активен.
Состоянием экрана считается типовое наличие/отсутствие двух или более элементов экрана, подчиненное общей логике. Если экран содержит несколько состояний, то сначала описываются общие для всех состояний интерактивные элементы, а затем для каждого состояния – индивидуальные интерактивные элементы.

## Документация кода
Документация к коду не предусмотрена.
Кэширование данных
Кэширование загружаемых из интернета или введенных пользователем данных (текстовых, фото, видео) не предусмотрено, если иное не указано в требованиях к экрану или интерактивному элементу.
Требования к монстрам
В игру необходимо добавить пять различных монстров, представленных на дизайне в Figma. Каждому монстру нужно дать уникальное имя на выбор разработчика.


## Экраны приложения
### 1. Экран №1 «Запрос геолокации».

1.1. Описание

На данном экране пользователь может разрешить/не разрешить доступ к своей геопозиции. 

1.2. Переходы

Переход на экраны №2 или №4.

1.3. Состояние экрана

Для этого экрана есть одно общее состояние.

    1.3.1. Кнопка Разрешить

По нажатию показывается системный попап с запросом на доступ к геолокации пользователя. Если пользователь разрешает доступ, то происходит переход на экран №3. Если запрещает доступ, то происходит переход на экран №2.



### 2. Экран №2 «Отсутствие разрешения на геолокацию»

2.1. Описание

На данном экране пользователь может перейти в настройки приложения в настройках устройства для разрешения доступа к геолокации.

2.2. Переходы

На этом экране приложение должно автоматически отслеживать наличие разрешения на доступ к геолокации пользователя и при его наличии автоматически переходить на экран №3.

2.3. Общее состояние

    2.3.1. Кнопка Перейти к настройкам 

По нажатию пользователю открывается системное приложение «Настройки», на котором сразу показывается экран приложения.



### 3. Экран №3 «Карта монстров»

3.1. Описание

На данном экране пользователь может на карте увидеть монстров вокруг себя, перейти к поимке выбранного монстра или посмотреть свою команду. 

3.2. Переходы

Переход на экраны №3 и №4.

3.3. Состояние экрана

Для этого экрана есть одно общее состояние, содержащее следующие интерактивные элементы:

    3.3.1.  Карта

Интегрированная яндекс или гугл карта (на выбор разработчика), которая отображает позицию пользователя. 

    3.3.2. Кнопка увеличения масштаба

По нажатию увеличивает масштаб карты на 25%.

    3.3.3. Кнопка уменьшения масштаба

По нажатию уменьшает масштаб карты на 25%. 

    3.3.4. Кнопка определения местонахождения

По нажатию карта центрируется по местоположению пользователя.

    3.3.5. Кнопка Моя команда

По нажатию ведет на экран №5

    3.3.6. Монстры вокруг

При загрузке экрана формируется список из 30 случайных монстров в случайных локациях в радиусе километра от геолокации пользователя. Затем каждые 5 минут список обновляется: с 20% вероятностью каждый монстр удаляется из списка (и из карты) и в список добавляется 6 случайных монстров в случайные локации в радиусе километра от геолокации пользователя. Поверх карты (пункт 4.3.3.1.) динамически показываются все монстры в радиусе 300 метров от геолокации пользователя, при перемещении пользователя список показываемых монстров обновляется. 

        3.3.6.1. POI монстра

В POI показывается изображение соответствующего монстра. По нажатию на POI:

если расстояние от пользователя до монстра 100 или меньше метров, происходит переход на экран №4. с выбранным монстром. При этом выбранный монстр удаляется из списка монстров на карте;
если расстояние больше 100 метров, то показывается системный алерт: «Вы находитесь слишком далеко от монстра – {n} метров», где вместо {n} подставляется целочисленное значение расстояния от пользователя до монстра в метрах.


### 4. Экран №4 «Поимка монстра»

4.1. Описание

На этом экране пользователь может поймать монстра.

4.2. Переходы

Переход на экран №3.

4.3. Состояние экрана

Для этого экрана есть одно общее состояние, содержащее следующие интерактивные элементы:

    4.3.1. Надпись уровень монстра

При переходе на экран для монстра случайно генерируется уровень от 5 до 20. Сгенерированный уровень показывается в надписи.

    4.3.2. Изображение монстра 

Отображает изображение выбранного монстра. 

    4.3.3. Кнопка Попробовать поймать

По нажатию на кнопку с вероятностью 20% игрок ловит монстра:

при удачной поимке монстр добавляется в команду и кэшируется, показывается системный попап: «Ура! Вы поймали монстра {n} в свою команду» (где {n} – имя монстра), с кнопкой «Вернуться на карту», по нажатию на которую происходит переход на экран №3. 
при неудачной попытке с вероятностью 30% монстр убегает: показывается системный попап с текстом «Монстр убежал!» с кнопкой »Вернуться на карту», по нажатию на которую происходит переход на экран №3 Если монстр не убегает, то показывается системный попап «Не вышло:( Попробуйте поймать еще раз!» с кнопкой «ОК». 


### 5. Экран №5 «Моя команда»

5.1. Описание

На этом экране пользователь может просмотреть пойманных монстров.

5.2. Переходы

Переход на экран №3.

5.3. Состояние экрана

Для этого экрана есть одно общее состояние, содержащее следующие интерактивные элементы:

    5.3.1. Надпись «Вы еще не поймали монстров в свою команду»

Показывается при условии, что пользователь еще не поймал ни одного монстра.

    5.3.2. Таблица с монстрами

Таблица отображает пойманных монстров, закэшированных в приложении.

        5.3.2.1. Ячейка монстра

Ячейка состоит из:

            5.3.2.1.1. Изображение монстра

Отображает изображение монстра.

            5.3.2.1.2. Надпись название монстра

Надпись отображает значение поля «name».

            5.3.2.1.3. Надпись уровень монстра

Надпись отображает значение поля «name».



## Критерии оценки 

**Зачёт**

Реализован весь необходимый функционал приложения или реализация содержит дополнительный функционал, не предусмотренный техническим заданием.

**Незачёт**

Приложение не запускается на мобильных устройствах/эмуляторе или в приложении отсутствует один экран (или несколько), заявленный в техническом задании.

